# Version: 2.0.0
# Last Updated: 2026-02-12
# Author: System
# Changes: Added prompt version tracking metadata
# Breaking: false

JSON-VASTAUSMUOTO (PAKOLLINEN)
- Palauta vain JSON-taulukko.
- Ei markdownia, ei selitystekstiä JSON:n ulkopuolelle.
- Ei trailing comma -merkintää.

JSON-SKEEMA (KENTTÄTASON SOPIMUS):
[
  {
    "question": "kysymysteksti",
    "type": "multiple_choice" | "multiple_select" | "fill_blank" | "true_false" | "short_answer" | "matching" | "sequential" | "flashcard",
    "topic": "aihealue",
    "subtopic": "valinnainen alateema",
    "skill": "snake_case_taito",
    "options": ["vaihtoehto1", "vaihtoehto2", "vaihtoehto3", "vaihtoehto4", "vaihtoehto5"],
    "pairs": [{"left": "vasen", "right": "oikea"}],
    "items": ["vaihe 1", "vaihe 2", "vaihe 3", "vaihe 4"],
    "correct_order": [0, 1, 2, 3],
    "correct_answer": "oikea vastaus",
    "correct_answers": ["vastaus1", "vastaus2"],
    "answer": "flashcard-tilan ydinvastaus",
    "acceptable_answers": ["vaihtoehtoinen hyväksyttävä vastaus"],
    "explanation": "2-3 lauseen henkilökohtainen selitys (sinä-muoto)"
  }
]

PAKOLLISET YHTEISET SÄÄNNÖT:
- Jokaisessa rivissä on topic ja skill (ei tyhjä).
- Luo tasan {{question_count}} riviä.
- Flashcard-tilassa käytä aina type = "flashcard".
- Käytä vain sallittuja type-arvoja.

TYYPPIKOHTAINEN MINIMISOPIMUS:
- multiple_choice: options on pakollinen ja sisältää tasan 4 vaihtoehtoa.
- multiple_select: options on pakollinen ja sisältää tasan 5 vaihtoehtoa.
  correct_answers on pakollinen ja sisältää 2-3 oikeaa vaihtoehtoa options-listasta.
  Älä tee triviaalia kysymystä, jossa kaikki vaihtoehdot ovat oikein.
- true_false: correct_answer on boolean (true/false).
- fill_blank: correct_answer on pakollinen; acceptable_answers suositeltu.
- short_answer: correct_answer on pakollinen; acceptable_answers suositeltu.
- matching: pairs on pakollinen ja sisältää vähintään 4 paria.
- sequential: items + correct_order pakolliset.
- sequential timeline: items voi olla [{"text":"...","year":2020}] tai ["..."];
  käytä year vain aidossa aikajärjestyksessä.

SELITYSTYYLI (INTENT-KRIITTINEN):
- Kirjoita selitys suoraan oppilaalle (sinä-muoto).
- Selitys sisältää: miksi oikein, tyypillinen kompastuskohta, lyhyt yhteys/esimerkki.

NUMEROMUOTOILU (SUOMI):
- Desimaalierotin: pilkku (esim. 15,25).
- Lukusarjat: puolipiste + välilyönti (esim. 5; 10; 15).
- Tuhaterotin: välilyönti (esim. 1 000).
- Katso täydet säännöt: finnish-number-formatting.txt

VARMISTUS ENNEN VASTAUSTA:
- topic-kenttä puuttuu -> korjaa.
- JSON ei validi -> korjaa.
- Jos jokin kenttä ei sovellu typeen, jätä se pois.
